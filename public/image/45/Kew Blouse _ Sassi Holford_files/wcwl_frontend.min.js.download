jQuery(document).ready(function(p){function v(){u();var e=".wcwl_elements";p(".wcwl_frontend_wrap").length&&(e=".wcwl_frontend_wrap"),p(e+":not(.bound)").addClass("bound").on("click","a.wcwl_control",function(e){e.preventDefault(),p(".wcwl_notice").hide(),p(".wcwl_frontend_wrap").length&&l(p(this).closest(".wcwl_frontend_wrap")),p('div[aria-live="polite"]').empty(),function(e){var t=e.closest(".wcwl_frontend_wrap");t.length||(t=e.closest(".wcwl_elements"));var l=[],w=t.find('input[name="wcwl_email"]');(function(e){{if(!(!e.length||e.val()&&(t=e.val(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t))))return e.addClass("wcwl_error_highlight"),!1;e.removeClass("wcwl_error_highlight")}var t;return!0})(w)||l.push("email");var i=t.find('input[name="wcwl_optin"]');(function(e){{if(e.length&&!e.is(":checked"))return e.closest(".wcwl_optin").addClass("wcwl_error_highlight"),!1;e.closest(".wcwl_optin").removeClass("wcwl_error_highlight")}return!0})(i)||l.push("optin");0==l.length?(e.find("button").hide(),e.find(".spinner").show(),h=t.find(".wcwl_control"),f=wcwl_data.loading_message,(m=h.find('div[aria-live="polite"]')).empty(),m.append("<p>"+f+"</p>"),o=t,n=e,c=w.val(),a=n.data("context"),d={},p(".wcwl_checkbox").length&&p(".wcwl_checkbox").each(function(){var e=p(this).data("product-id");d[e]=this.checked}),r=d,_=n.data("product-id"),s={action:"wcwl_process_user_waitlist_request",nonce:n.data("nonce"),product_id:_,products:r,email:c,context:a,archive:o.hasClass("wcwl_frontend_wrap")?"true":"false"},p.post(wcwl_data.ajax_url,s).done(function(e){if(e.success){var t=e.data.html.replace("\x3c!-- wcwl_elements --\x3e","");t=t.replace("\x3c!-- wcwl_frontend_wrap --\x3e",""),o.replaceWith(t),p(".wcwl_frontend_wrap").length?(l=a,(c=p('a[data-product-id="'+_+'"]').closest(".wcwl_frontend_wrap")).find(".wcwl_elements, .wcwl_notice").show(),c.find(".wcwl_notice").next("a button").hide(),c.find(".wcwl_toggle, .wcwl_intro, .wcwl_optin, .wcwl_email_elements, .wcwl_control").hide(),"leave"===l&&c.find(".woocommerce_waitlist").text(c.find('input[name="wcwl_join_button_text"]').val())):(p(".single_variation_wrap").length&&(w=e.data.html,i=_,n=p("form.variations_form").data("product_variations"),p.each(n,function(e,t){if(t.variation_id===i){w=w.replace("</div>\x3c!-- wcwl_elements --\x3e","");var l=t.availability_html.substring(t.availability_html.lastIndexOf('<div class="wcwl_elements">'),t.availability_html.lastIndexOf("</div>\x3c!-- wcwl_elements --\x3e"));t.availability_html=t.availability_html.replace(l,w),n[e]=t}}),p("form.variations_form").data("product_variations",n)),p(".wcwl_intro, .wcwl_optin, .wcwl_control, .wcwl_email_elements").hide(),p(".wcwl_notice").show())}var w,i,n,l,c;u(),v()})):(t.find(".wcwl_notice").hide(),t.find(".wcwl_intro, .wcwl_optin").show(),"email"==l[0]?w.focus():i.focus());var o,n,c,a,r,_,s,d;var h,f,m}(p(this))}),p(".wcwl_toggle").on("click","button",function(){var e=p(this).closest(".wcwl_frontend_wrap");l(e),e.find(".wcwl_intro, .wcwl_optin, .wcwl_email_elements").show()}),p(".wcwl_notice").on("click",".wcwl_notice_dismiss",function(){var e=p(this).closest(".wcwl_notice");if(e.find('div[aria-live="polite"]').empty(),e.hide(),p(".wcwl_frontend_wrap").length){var t=p(this).closest(".wcwl_frontend_wrap");l(t),t.find(".wcwl_toggle").show(),t.find(".wcwl_elements").hide()}else p(this).closest(".wcwl_elements").find(".wcwl_intro, .wcwl_optin, .wcwl_email_elements, .wcwl_control").show()}),p(".wcwl_email_elements").on("keyup keypress","input.wcwl_email",function(e){var t=e.keyCode||e.which;13===t&&(p(this).closest(".wcwl_frontend_wrap").find(".woocommerce_waitlist").trigger("click"),p(this).closest(".wcwl_elements").find(".woocommerce_waitlist").trigger("click"))})}function l(e){p(".wcwl_elements, .wcwl_notice").hide(),p(".wcwl_email, .wcwl_optin").removeClass("wcwl_error_highlight"),p(".wcwl_toggle, .woocommerce_waitlist, .wcwl_frontend_wrap > .wcwl_control").show(),e.find(".wcwl_toggle").hide(),e.find(".wcwl_elements, .wcwl_email_elements, .wcwl_control, .wcwl_optin").show()}if(v(),p("form.variations_form").change(function(){v()}),p(".tribe-events-tickets").length){var e=p(".woocommerce.tribe-tickets-form-row");if(0<e.length){var i=!1;p.each(e,function(e,t){var l=p(t).data("product-id"),w=wcwl_event_data.tickets[l];w&&(i=!0,p(w).insertAfter(p(t).find(".tickets_nostock")))}),i&&(p(wcwl_event_data.button).insertAfter(p(".tribe-events-tickets")),v())}}function u(){p(".wcwl_nojs").removeClass("wcwl_nojs")}});